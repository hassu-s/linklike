<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ホーム</title>
    <link href="../css/all1.css" rel="stylesheet" type="text/css">
    <link href="../css/share.css" rel="stylesheet" type="text/css">
    <link href="../favicon/HASU.png" rel="shortcut icon" type="image/x-icon">
    <script src="../javascript/rule.js"></script>
    <script src="../javascript/maintenance.js"></script>
    <script src="../javascript/launcher.js"></script>
    <script src="../javascript/info.js"></script>
    <!-- Googleサービスへ通知する内容はじめ -->
    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
        'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
        })(window,document,'script','dataLayer','GTM-K43XP4KG');</script>
    <!-- End Google Tag Manager -->
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-K43XP4KG"
        height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-B7JH1PTJVC"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-B7JH1PTJVC');
    </script>
    <!-- Googleサービスへ通知する内容おわり -->
    <style>
        .carousel-container {
            width: 100%;
            max-width: 500px;
            overflow: hidden;
            border-radius: 5px;
            box-shadow: 0px 0px 3px 0px rgba(100, 100, 100);
            position: relative;
            left: 50%;
            transform: translateX(-50%);
        }

        .carousel-container:hover .prev,
        .carousel-container:hover .next {
            opacity: 1;
        }

        .carousel {
            display: flex;
            transition: transform 0.5s ease-in-out;
        }

        .carousel img {
            width: 100%;
            border-radius: 5px;
        }

        .carousel-buttons {
            position: absolute;
            top: 50%;
            width: 100%;
            display: flex;
            justify-content: space-between;
            transform: translateY(-50%);
        }

        .prev {
            background-color: rgba(255, 255, 255, 0.7);
            border: none;
            cursor: pointer;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            font-size: 18px;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
            opacity: 0;
            pointer-events: none;
            margin-left: 10px;
            box-shadow: 0px 0px 3px 0px rgba(100, 100, 100);

        }
        .next {
            background-color: rgba(255, 255, 255, 0.7);
            border: none;
            cursor: pointer;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            font-size: 18px;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
            opacity: 0;
            pointer-events: none;
            margin-right: 10px;
            box-shadow: 0px 0px 3px 0px rgba(100, 100, 100);

        }

        .prev:hover, .next:hover {
            background-color: rgba(255, 255, 255, 1);
        }

        .progress-bar {
            position: absolute;
            bottom: 0;
            left: 0;
            height: 5px;
            background: linear-gradient(to right, #65defc, #938aff);
        }

        .indicators {
            display: flex;
            justify-content: center;
            margin-top: 10px;
        }

        .indicators div {
            width: 12px;
            height: 12px;
            background-color: #ddd;
            margin: 0 5px;
            border-radius: 50%;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .indicators .active {
            background-color: #333;
        }

        .carousel-container:hover .prev,
        .carousel-container:hover .next {
            pointer-events: auto;

        }

        .indicators {
            position: absolute;
            bottom: 15px; /* 画像の直下に配置 */
            left: 50%;
            transform: translateX(-50%);
        }

        .imgbtna {
            height: 13px;
            width: auto;
        }
        .inhtml {
            display: flex;
            position: relative;
            width: 100%;
            max-width: 500px;
            height: 500px;
            border: none;
            left: 50%;
            transform: translateX(-50%);
            margin-top: -30px;
        }

    </style>
</head>
<body>
    <div class="carousel-container">
        <div class="carousel">
            <img src="../image/news/123.png" alt="Slide 1">
            <img src="../image/news/234.png" alt="slide 2">
            <img src="../image/news/123.png" alt="Slide 1 Clone"> <!-- 最後の画像の後にクローンを追加 -->
        </div>
        <div class="carousel-buttons">
            <a class="prev"><img class="imgbtna" src="../image/button/back.png"></a>
            <a class="next"><img class="imgbtna" src="../image/button/next.png"></a>
        </div>
        <div class="progress-bar" id="progress"></div>
        <div class="indicators" id="indicatorContainer"></div>
    </div>

    <div class="bodybg">
        <p class="bodytitle">
            お知らせ
        </p>
    </div><br>
    <iframe class="inhtml" src="https://hassu-s.github.io/info/info/linklike"></iframe>
    
    <div class="bodybg">
        <p class="bodytitle">
            リンクデータ
        </p>
    </div>

    <div class="linkbtn">
        <p class="linkt">SHARE</p>
        <div class="logobtn">
            <div class="bglogo"><a href="https://twitter.com/intent/tweet?text=%E3%83%AA%E3%83%B3%E3%82%AF%E3%83%A9/%E8%93%AE%E3%83%8E%E7%A9%BA%E6%83%85%E5%A0%B1%E3%81%AF%E3%81%93%E3%81%93%E3%81%8B%E3%82%89%EF%BC%81%E3%80%80%E3%81%AF%E3%81%A3%E3%81%99%E3%83%BC%E3%81%9A%E3%83%AA%E3%83%B3%E3%82%AF%E3%83%A9%E6%94%BB%E7%95%A5%E9%83%A8%20%23%E3%81%AF%E3%81%99%E3%81%8F%E3%82%89%E3%81%B6%20https%3A%2F%2Fhassu-s.github.io%2Flinklike%2F"><img class="logox" src="../image/icon/xlogo.png" title="X"></a></div>
            <div class="bglogo1"><a id="shareBtn"><img class="logox" src="../image/button/link.png" title="リンク"></a></div>
        </div>
    </div>
</body>
    <script>
        const carousel = document.querySelector('.carousel');
        const images = document.querySelectorAll('.carousel img');
        const prevButton = document.querySelector('.prev');
        const nextButton = document.querySelector('.next');
        const progressBar = document.getElementById('progress');
        const indicatorContainer = document.getElementById('indicatorContainer');
        let currentIndex = 0;
        let slideInterval;
        let progressInterval;

        // インジケーターの自動生成
        images.forEach((image, index) => {
            if (index < images.length - 1) { // 最後のクローン画像を除外
                const dot = document.createElement('div');
                dot.classList.add('dot');
                if (index === 0) dot.classList.add('active');
                dot.dataset.index = index;
                dot.addEventListener('click', (e) => {
                    currentIndex = parseInt(e.target.dataset.index);
                    updateCarousel();
                    clearInterval(slideInterval);
                    clearInterval(progressInterval);
                    slideInterval = setInterval(showNext, 5000);
                });
                indicatorContainer.appendChild(dot);
            }
        });

        const dots = document.querySelectorAll('.dot');

        function updateCarousel() {
            const offset = -currentIndex * 100;
            carousel.style.transition = 'transform 0.5s ease-in-out';
            carousel.style.transform = `translateX(${offset}%)`;
            dots.forEach(dot => dot.classList.remove('active'));
            if (currentIndex < images.length - 1) {
                dots[currentIndex].classList.add('active');
            } else {
                dots[0].classList.add('active'); // クローン画像の時は最初のインジケータをアクティブに
            }
            resetProgressBar();
        }

        function showNext() {
            currentIndex++;
            if (currentIndex >= images.length) {
                carousel.style.transition = 'none'; // 瞬時に最初の画像に切り替える
                currentIndex = 0;
                const offset = -currentIndex * 100;
                carousel.style.transform = `translateX(${offset}%)`;
                setTimeout(() => {
                    carousel.style.transition = 'transform 0.5s ease-in-out'; // 通常のスライドに戻す
                    currentIndex++;
                    updateCarousel();
                }, 10);
            } else {
                updateCarousel();
            }
        }

        function showPrev() {
            currentIndex--;
            if (currentIndex < 0) {
                currentIndex = images.length - 2; // 最後のクローンの1つ前に移動
                carousel.style.transition = 'none';
                const offset = -currentIndex * 100;
                carousel.style.transform = `translateX(${offset}%)`;
                setTimeout(() => {
                    carousel.style.transition = 'transform 0.5s ease-in-out';
                    updateCarousel();
                }, 10);
            } else {
                updateCarousel();
            }
        }

        function resetProgressBar() {
            progressBar.style.width = '0%';
            progressBar.style.transition = 'none';
            setTimeout(() => {
                progressBar.style.transition = 'width 5s linear';
                progressBar.style.width = '100%';
            }, 10);
        }

        nextButton.addEventListener('click', () => {
            showNext();
            clearInterval(slideInterval);
            clearInterval(progressInterval);
            slideInterval = setInterval(showNext, 5000);
        });

        prevButton.addEventListener('click', () => {
            showPrev();
            clearInterval(slideInterval);
            clearInterval(progressInterval);
            slideInterval = setInterval(showNext, 5000);
        });

        // 自動スライド
        slideInterval = setInterval(showNext, 5000);
        progressInterval = setInterval(resetProgressBar, 5000);

        // 初期状態の更新
        updateCarousel();
        resetProgressBar();
    </script>
    <script>
        document.getElementById('shareBtn').addEventListener('click', async () => {
            if (navigator.share) {
                try {
                    await navigator.share({
                        title: 'はっすーずリンクラ攻略部',
                        text: 'はっすーずリンクラ攻略部でリンクラ/蓮ノ空情報を確認しよう！',
                        url: 'https://hassu-s.github.io/linklike/', // 共有するURL
                    });
                    console.log('共有しました');
                } catch (error) {
                    console.error('共有に失敗しました:', error);
                }
            } else {
                console.log('このブラウザは共有機能に対応していません。');
            }
        });
    </script>
</html>